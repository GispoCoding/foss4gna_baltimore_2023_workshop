<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

<!-- Based on TemplateMo 553 Xtra Blog: https://templatemo.com/tm-553-xtra-blog -->

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta property="og:title" content="5 Exercise 2 Data Structure Design and Creation | Building an Enterprise GIS Workflow with QGIS and PostGIS" />
<meta property="og:type" content="book" />





<meta name="author" content="Gispo Ltd." />

<meta name="date" content="2023-10-20" />


<meta name="description" content="5 Exercise 2 Data Structure Design and Creation | Building an Enterprise GIS Workflow with QGIS and PostGIS">

<title>5 Exercise 2 Data Structure Design and Creation | Building an Enterprise GIS Workflow with QGIS and PostGIS</title>

<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="custom.css" type="text/css" />

<link href="css/bootstrap.min.css" rel="stylesheet">
<link href="css/hamburgers.css" rel="stylesheet">

</head>

<body>


<div class="main-content">
<!-- special comment to mark beginning of title section for bookdown -->
<!-- bookdown comments must be in this order: title, toc, body -->

<div class="main-content-wrapper">

<div class="row">
<div class="col-sm-12">
<header class="main-toc sidebar" id="sidebar">
<div class="sidebar-wrapper">

<button class="navbar-toggle hamburger hamburger--collapse" id="navbar-toggle"
type="button" onclick="navToggle()" aria-label="Toggle navigation">
<span class="hamburger-box"><span class="hamburger-inner"></span></span>
</button>

<div class="sidebar-title-wrapper">
<img alt="Logo" width="100" src="img/gispo_white_sm.png" class="sidebar-logo">
<div class="sidebar-title"><h1>Building an Enterprise GIS Workflow with QGIS and PostGIS</h1></div>
<div class="abstract-sidebar"><p>Workshop delivered in FOSS4G-NA Baltimore 2023.</p></div>
</div>

<nav class="sidebar-nav">
<div id="TOC" class="toc">
<ul>
<li><a href="index.html#introduction"><span class="toc-section-number">1</span> Introduction</a></li>
<li><a href="index.html#workshop-objectives"><span class="toc-section-number">2</span> Workshop Objectives</a></li>
<li><a href="index.html#reading-instructions"><span class="toc-section-number">3</span> Reading instructions</a>
<ul>
<li><a href="index.html#software-in-question-and-further-information"><span class="toc-section-number">3.1</span> Software in question and further information</a></li>
<li><a href="index.html#errors"><span class="toc-section-number">3.2</span> Errors</a></li>
<li><a href="index.html#license-and-user-rights"><span class="toc-section-number">3.3</span> License and user rights</a></li>
</ul></li>
<li><a href="01_part_1.html#exercise-1-database-creation-and-integration"><span class="toc-section-number">4</span> Exercise 1: Database Creation and Integration</a>
<ul>
<li><a href="01_part_1.html#installation-and-configuration-qgis"><span class="toc-section-number">4.0.1</span> Installation and Configuration: QGIS</a></li>
<li><a href="01_part_1.html#installation-and-configuration-postgresql"><span class="toc-section-number">4.0.2</span> Installation and Configuration: PostgreSQL</a></li>
<li><a href="01_part_1.html#integrating-the-database-with-qgis"><span class="toc-section-number">4.0.3</span> Integrating the Database with QGIS</a></li>
<li><a href="01_part_1.html#creating-the-database-specifically-for-the-refuge-camp"><span class="toc-section-number">4.0.4</span> Creating the Database specifically for the Refuge Camp</a></li>
</ul></li>
<li><a href="02_part_2.html#exercise-2-data-structure-design-and-creation"><span class="toc-section-number">5</span> Exercise 2 Data Structure Design and Creation</a>
<ul>
<li><a href="02_part_2.html#analyzing-requirements-and-designing-the-data-schema"><span class="toc-section-number">5.1</span> Analyzing Requirements and Designing the Data Schema</a></li>
<li><a href="02_part_2.html#creating-the-necessary-tables"><span class="toc-section-number">5.2</span> Creating the Necessary Tables</a></li>
</ul></li>
<li><a href="03_part_3.html#exercise-3-creating-and-editing-data-in-qgis"><span class="toc-section-number">6</span> Exercise 3: Creating and Editing Data in QGIS</a>
<ul>
<li><a href="03_part_3.html#loading-some-aerial-imagery-for-context-in-qgis"><span class="toc-section-number">6.1</span> Loading some aerial imagery for context in QGIS</a></li>
<li><a href="03_part_3.html#loading-the-data-and-creating-new-features"><span class="toc-section-number">6.2</span> Loading the Data and Creating New Features</a></li>
<li><a href="03_part_3.html#editing-existing-features"><span class="toc-section-number">6.3</span> Editing Existing Features</a></li>
<li><a href="03_part_3.html#deleting-unnecessary-features"><span class="toc-section-number">6.4</span> Deleting Unnecessary Features</a></li>
</ul></li>
<li><a href="04_part_4.html#exercise-4-creating-lookup-tables-and-utilizing-lookup-values"><span class="toc-section-number">7</span> Exercise 4: Creating Lookup Tables and Utilizing Lookup Values</a>
<ul>
<li><a href="04_part_4.html#identifying-attributes-requiring-predefined-values"><span class="toc-section-number">7.1</span> Identifying Attributes Requiring Predefined Values</a></li>
<li><a href="04_part_4.html#creating-lookupenumeration-tables"><span class="toc-section-number">7.2</span> Creating Lookup/Enumeration Tables</a></li>
<li><a href="04_part_4.html#establishing-relationships-with-the-main-data-table"><span class="toc-section-number">7.3</span> Establishing Relationships with the Main Data Table</a></li>
<li><a href="04_part_4.html#populating-the-enumeration-table"><span class="toc-section-number">7.4</span> Populating the Enumeration Table</a></li>
<li><a href="04_part_4.html#using-the-enumeration-table-in-qgis"><span class="toc-section-number">7.5</span> Using the Enumeration Table in QGIS</a></li>
<li><a href="04_part_4.html#understanding-and-visualizing-the-relations-between-the-database-tables"><span class="toc-section-number">7.6</span> Understanding and visualizing the relations between the database tables</a></li>
</ul></li>
<li><a href="05_part_5.html#exercise-5-workflow-optimization-and-data-entry-forms"><span class="toc-section-number">8</span> Exercise 5: Workflow Optimization and Data Entry Forms</a>
<ul>
<li><a href="05_part_5.html#designing-a-data-entry-form"><span class="toc-section-number">8.1</span> Designing a Data Entry Form</a></li>
<li><a href="05_part_5.html#discovering-table-relations-in-qgis-before-setting-up-the-forms"><span class="toc-section-number">8.2</span> Discovering table relations in QGIS before setting up the forms</a></li>
<li><a href="05_part_5.html#enabling-and-configuring-form-widgets"><span class="toc-section-number">8.3</span> Enabling and Configuring Form Widgets</a></li>
<li><a href="05_part_5.html#going-beyond-the-basics"><span class="toc-section-number">8.4</span> Going beyond the basics</a></li>
</ul></li>
<li><a href="06_part_6.html#exercise-6-advanced-topics"><span class="toc-section-number">9</span> Exercise 6: Advanced Topics</a>
<ul>
<li><a href="06_part_6.html#creating-triggers-for-data-entry-automation"><span class="toc-section-number">9.1</span> Creating Triggers for Data Entry Automation</a></li>
<li><a href="06_part_6.html#creating-some-sample-data"><span class="toc-section-number">9.2</span> Creating some sample data</a></li>
</ul></li>
<li><a href="07_part_7.html#final-words"><span class="toc-section-number">10</span> Final Words</a>
<ul>
<li><a href="07_part_7.html#key-takeaways"><span class="toc-section-number">10.1</span> Key Takeaways:</a></li>
<li><a href="07_part_7.html#next-steps"><span class="toc-section-number">10.2</span> Next Steps:</a></li>
<li><a href="07_part_7.html#feedback"><span class="toc-section-number">10.3</span> Feedback:</a></li>
<li><a href="07_part_7.html#further-contact-and-services"><span class="toc-section-number">10.4</span> Further Contact and Services:</a>
<ul>
<li><a href="07_part_7.html#how-we-serve-you"><span class="toc-section-number">10.4.1</span> How We Serve You:</a></li>
</ul></li>
</ul></li>
</ul>
</div>
</nav>
</div>
</header>
</div>
</div>
<div class="row">
<div class="col-sm-12">
<div id="exercise-2-data-structure-design-and-creation" class="section level1" number="5">
<h1><span class="header-section-number">5</span> Exercise 2 Data Structure Design and Creation</h1>
<p>In this exercise we will focus on designing and creating the initial database schema for capturing information about:</p>
<ul>
<li><p>dwellings,</p></li>
<li><p>water distribution points, and</p></li>
<li><p>educational facilities</p></li>
</ul>
<p>…within the Kutupalong-Balukhali Expansion Site, a refugee camp in Chattogram, Bangladesh.</p>
<div id="analyzing-requirements-and-designing-the-data-schema" class="section level2" number="5.1">
<h2><span class="header-section-number">5.1</span> Analyzing Requirements and Designing the Data Schema</h2>
<p>Now you will delve into the crucial process of analyzing requirements and designing the data schema. Imagine that your manager requested you to generate data about the dwellings, water distribution points, and educational facilities within the refugee camp.</p>
<p>To initiate any data modeling process, it’s crucial to tackle the following fundamental question:</p>
<ul>
<li>‘What specific information is essential to capture for each dwelling, water distribution point, and educational facility within the refugee camp?’"</li>
</ul>
<p>By identifying the different aspects to the information you’re interested in collecting, we can ensure that the database comprehensively represents the attributes and characteristics of these essential refuge camp components.</p>
<p>First, you need to generate a simple table to represent your data needs, e.g. as follows:</p>
<table>
<colgroup>
<col width="26%" />
<col width="26%" />
<col width="29%" />
<col width="18%" />
</colgroup>
<thead>
<tr class="header">
<th><strong>Table</strong></th>
<th><strong>Table Name</strong></th>
<th><strong>Attribute Information</strong></th>
<th><strong>Geometry Type</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Dwellings</td>
<td>dwellings</td>
<td>capacity, occupancy_status</td>
<td>Polygon</td>
</tr>
<tr class="even">
<td>Water Distribution Points</td>
<td>water_distribution_points</td>
<td>capacity, operational_status</td>
<td>Point</td>
</tr>
<tr class="odd">
<td>Educational Facilities</td>
<td>educational_facilities</td>
<td>facility_type, capacity</td>
<td>Point</td>
</tr>
</tbody>
</table>
</div>
<div id="creating-the-necessary-tables" class="section level2" number="5.2">
<h2><span class="header-section-number">5.2</span> Creating the Necessary Tables</h2>
<p>Then, it’s time to create the tables with the following SQL that generates three tables and 3 to 4 columns with their corresponding data types:</p>
<div class="code-box">
<div class="sourceCode" id="cb4"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb4-1"><a href="02_part_2.html#cb4-1" aria-hidden="true"></a><span class="co">-- Creating the Dwellings table</span></span>
<span id="cb4-2"><a href="02_part_2.html#cb4-2" aria-hidden="true"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> dwellings (</span>
<span id="cb4-3"><a href="02_part_2.html#cb4-3" aria-hidden="true"></a>    dwelling_id <span class="dt">INTEGER</span> <span class="kw">PRIMARY</span> <span class="kw">KEY</span> <span class="kw">GENERATED</span> ALWAYS <span class="kw">AS</span> IDENTITY,</span>
<span id="cb4-4"><a href="02_part_2.html#cb4-4" aria-hidden="true"></a>    capacity <span class="dt">INTEGER</span>,</span>
<span id="cb4-5"><a href="02_part_2.html#cb4-5" aria-hidden="true"></a>    occupancy_status <span class="dt">VARCHAR</span>(<span class="dv">255</span>),</span>
<span id="cb4-6"><a href="02_part_2.html#cb4-6" aria-hidden="true"></a>    geom GEOMETRY(POLYGON, <span class="dv">32646</span>)</span>
<span id="cb4-7"><a href="02_part_2.html#cb4-7" aria-hidden="true"></a>);</span>
<span id="cb4-8"><a href="02_part_2.html#cb4-8" aria-hidden="true"></a></span>
<span id="cb4-9"><a href="02_part_2.html#cb4-9" aria-hidden="true"></a><span class="co">-- Creating the Water Distribution Points table</span></span>
<span id="cb4-10"><a href="02_part_2.html#cb4-10" aria-hidden="true"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> water_distribution_points (</span>
<span id="cb4-11"><a href="02_part_2.html#cb4-11" aria-hidden="true"></a>    point_id <span class="dt">INTEGER</span> <span class="kw">PRIMARY</span> <span class="kw">KEY</span> <span class="kw">GENERATED</span> ALWAYS <span class="kw">AS</span> IDENTITY,</span>
<span id="cb4-12"><a href="02_part_2.html#cb4-12" aria-hidden="true"></a>    capacity <span class="dt">INTEGER</span>,</span>
<span id="cb4-13"><a href="02_part_2.html#cb4-13" aria-hidden="true"></a>    operational_status <span class="dt">VARCHAR</span>(<span class="dv">255</span>),</span>
<span id="cb4-14"><a href="02_part_2.html#cb4-14" aria-hidden="true"></a>    geom GEOMETRY(POINT, <span class="dv">32646</span>)</span>
<span id="cb4-15"><a href="02_part_2.html#cb4-15" aria-hidden="true"></a>);</span>
<span id="cb4-16"><a href="02_part_2.html#cb4-16" aria-hidden="true"></a></span>
<span id="cb4-17"><a href="02_part_2.html#cb4-17" aria-hidden="true"></a><span class="co">-- Creating the Educational Facilities table</span></span>
<span id="cb4-18"><a href="02_part_2.html#cb4-18" aria-hidden="true"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> educational_facilities (</span>
<span id="cb4-19"><a href="02_part_2.html#cb4-19" aria-hidden="true"></a>    facility_id <span class="dt">INTEGER</span> <span class="kw">PRIMARY</span> <span class="kw">KEY</span> <span class="kw">GENERATED</span> ALWAYS <span class="kw">AS</span> IDENTITY,</span>
<span id="cb4-20"><a href="02_part_2.html#cb4-20" aria-hidden="true"></a>    facility_type <span class="dt">VARCHAR</span>(<span class="dv">255</span>),</span>
<span id="cb4-21"><a href="02_part_2.html#cb4-21" aria-hidden="true"></a>    capacity <span class="dt">INTEGER</span>,</span>
<span id="cb4-22"><a href="02_part_2.html#cb4-22" aria-hidden="true"></a>    geom GEOMETRY(POLYGON, <span class="dv">32646</span>)</span>
<span id="cb4-23"><a href="02_part_2.html#cb4-23" aria-hidden="true"></a>);</span></code></pre></div>
</div>
<p>Note that the code after the geometry type refers to the Coordinate Reference System (CRS). This CRS is commonly used in the UTM (Universal Transverse Mercator) projection for the region around Bangladesh, including our region of interest (Chattogram).</p>
<p>Now you can launch QGIS and browse the tables available through the PostGIS connection you’ve established. Note that there’s no data yet, you can just see that the tables already exist:</p>
<p><img src="img/p1/added_tables.png" /></p>
<p>Note that you can also see tables like “geography_columns” and “geometry_columns” which come with the PostGIS extension.</p>
<p>Great! Now you’ve created a few data structures for tables.</p>

</div>
</div>
<p style="text-align: center;">
<a href="01_part_1.html"><button class="btn btn-default">Previous</button></a>
<a href="03_part_3.html"><button class="btn btn-default">Next</button></a>
</p>
</div>
</div>

<footer class="footer text-center">

<div class="footer-container text-center">

<div class="footer-info">
<h5 class="footer-title">Building an Enterprise GIS Workflow with QGIS and PostGIS</h5>
<span class="footer-version">v2023-10-20</span>
<div class="license"><img src="img/by-nd.svg" width="80px" alt="CC-BY-ND"></div>
</div>

<div class="footer-info">
<h5 class="footer-title footer-company">Gispo Ltd.
<span class="footer-copyright-year">© 2023</span></h5>
<span class="footer-contact-info">Kumpulantie 3, 3 krs
<br>00520 Helsinki, Finland
<br>info@gispo.fi
</span>
</div>

</div>
</div>
</footer>
</div>


<script src="js/nav-script.js"></script>
<script src="js/answer-key.js"></script>
<script src="js/find_keys.js"></script>

</body>
</html>

<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

<!-- Based on TemplateMo 553 Xtra Blog: https://templatemo.com/tm-553-xtra-blog -->

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta property="og:title" content="6 Exercise 4: Creating Lookup Tables and Utilizing Lookup Values | Building an Enterprise GIS Workflow with QGIS and PostGIS" />
<meta property="og:type" content="book" />





<meta name="author" content="Gispo Ltd." />

<meta name="date" content="2023-06-22" />


<meta name="description" content="6 Exercise 4: Creating Lookup Tables and Utilizing Lookup Values | Building an Enterprise GIS Workflow with QGIS and PostGIS">

<title>6 Exercise 4: Creating Lookup Tables and Utilizing Lookup Values | Building an Enterprise GIS Workflow with QGIS and PostGIS</title>

<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="custom.css" type="text/css" />

<link href="css/bootstrap.min.css" rel="stylesheet">
<link href="css/hamburgers.css" rel="stylesheet">

</head>

<body>


<div class="main-content">
<!-- special comment to mark beginning of title section for bookdown -->
<!-- bookdown comments must be in this order: title, toc, body -->

<div class="main-content-wrapper">

<div class="row">
<div class="col-sm-12">
<header class="main-toc sidebar" id="sidebar">
<div class="sidebar-wrapper">

<button class="navbar-toggle hamburger hamburger--collapse" id="navbar-toggle"
type="button" onclick="navToggle()" aria-label="Toggle navigation">
<span class="hamburger-box"><span class="hamburger-inner"></span></span>
</button>

<div class="sidebar-title-wrapper">
<img alt="Logo" width="100" src="img/gispo_white_sm.png" class="sidebar-logo">
<div class="sidebar-title"><h1>Building an Enterprise GIS Workflow with QGIS and PostGIS</h1></div>
<div class="abstract-sidebar"><p>Workshop delivered in FOSS4G Prizren 2023.</p></div>
</div>

<nav class="sidebar-nav">
<div id="TOC" class="toc">
<ul>
<li><a href="index.html#welcome"><span class="toc-section-number">1</span> Welcome!</a></li>
<li><a href="index.html#reading-instructions"><span class="toc-section-number">2</span> Reading instructions</a>
<ul>
<li><a href="index.html#software-in-question-and-further-information"><span class="toc-section-number">2.1</span> Software in question and further information</a></li>
<li><a href="index.html#errors"><span class="toc-section-number">2.2</span> Errors</a></li>
<li><a href="index.html#license-and-user-rights"><span class="toc-section-number">2.3</span> License and user rights</a></li>
</ul></li>
<li><a href="01_part_1.html#exercise-1-database-creation-and-integration"><span class="toc-section-number">3</span> Exercise 1: Database Creation and Integration</a>
<ul>
<li><a href="01_part_1.html#installation-and-configuration-qgis"><span class="toc-section-number">3.0.1</span> Installation and Configuration: QGIS</a></li>
<li><a href="01_part_1.html#installation-and-configuration-postgresql"><span class="toc-section-number">3.0.2</span> Installation and Configuration: PostgreSQL</a></li>
<li><a href="01_part_1.html#integrating-the-database-with-qgis"><span class="toc-section-number">3.0.3</span> Integrating the Database with QGIS</a></li>
</ul></li>
<li><a href="02_part_2.html#exercise-2-data-structure-design-and-creation"><span class="toc-section-number">4</span> Exercise 2 Data Structure Design and Creation</a>
<ul>
<li><a href="02_part_2.html#analyzing-requirements-and-designing-the-data-schema"><span class="toc-section-number">4.1</span> Analyzing Requirements and Designing the Data Schema</a></li>
<li><a href="02_part_2.html#creating-the-necessary-tables"><span class="toc-section-number">4.2</span> Creating the Necessary Tables</a></li>
</ul></li>
<li><a href="03_part_3.html#exercise-3-creating-and-editing-data-in-qgis"><span class="toc-section-number">5</span> Exercise 3: Creating and Editing Data in QGIS</a>
<ul>
<li><a href="03_part_3.html#loading-some-aerial-imagery-for-context-in-qgis"><span class="toc-section-number">5.1</span> Loading some aerial imagery for context in QGIS</a></li>
<li><a href="03_part_3.html#loading-the-data-and-creating-new-features"><span class="toc-section-number">5.2</span> Loading the Data and Creating New Features</a></li>
<li><a href="03_part_3.html#editing-existing-features"><span class="toc-section-number">5.3</span> Editing Existing Features</a></li>
<li><a href="03_part_3.html#deleting-unnecessary-features"><span class="toc-section-number">5.4</span> Deleting Unnecessary Features</a></li>
</ul></li>
<li><a href="04_part_4.html#exercise-4-creating-lookup-tables-and-utilizing-lookup-values"><span class="toc-section-number">6</span> Exercise 4: Creating Lookup Tables and Utilizing Lookup Values</a>
<ul>
<li><a href="04_part_4.html#identifying-attributes-requiring-predefined-values"><span class="toc-section-number">6.1</span> Identifying Attributes Requiring Predefined Values</a></li>
<li><a href="04_part_4.html#creating-an-enumeration-table"><span class="toc-section-number">6.2</span> Creating an Enumeration Table</a></li>
<li><a href="04_part_4.html#establishing-relationships-with-the-main-data-table"><span class="toc-section-number">6.3</span> Establishing Relationships with the Main Data Table</a></li>
<li><a href="04_part_4.html#populating-the-enumeration-table"><span class="toc-section-number">6.4</span> Populating the Enumeration Table</a></li>
<li><a href="04_part_4.html#using-the-enumeration-table-in-qgis"><span class="toc-section-number">6.5</span> Using the Enumeration Table in QGIS</a></li>
<li><a href="04_part_4.html#visualizing-the-relations-between-the-database-tables"><span class="toc-section-number">6.6</span> Visualizing the relations between the database tables</a></li>
</ul></li>
<li><a href="05_part_5.html#exercise-5-workflow-optimization-and-data-entry-forms"><span class="toc-section-number">7</span> Exercise 5: Workflow Optimization and Data Entry Forms</a>
<ul>
<li><a href="05_part_5.html#designing-a-data-entry-form"><span class="toc-section-number">7.1</span> Designing a Data Entry Form</a></li>
<li><a href="05_part_5.html#customizing-form-layout-and-behavior"><span class="toc-section-number">7.2</span> Customizing Form Layout and Behavior</a></li>
<li><a href="05_part_5.html#enabling-and-configuring-form-widgets"><span class="toc-section-number">7.3</span> Enabling and Configuring Form Widgets</a></li>
<li><a href="05_part_5.html#testing-the-form-and-evaluating-efficiency"><span class="toc-section-number">7.4</span> Testing the Form and Evaluating Efficiency</a></li>
</ul></li>
<li><a href="06_part_6.html#exercise-6-automating-data-entry-with-triggers-and-getting-insights-from-the-database"><span class="toc-section-number">8</span> Exercise 6: Automating Data Entry with Triggers and Getting Insights from the Database</a>
<ul>
<li><a href="06_part_6.html#creating-triggers-for-data-entry-automation"><span class="toc-section-number">8.1</span> Creating Triggers for Data Entry Automation</a></li>
<li><a href="06_part_6.html#configuring-triggers"><span class="toc-section-number">8.2</span> Configuring Triggers</a></li>
<li><a href="06_part_6.html#testing-triggers"><span class="toc-section-number">8.3</span> Testing Triggers</a></li>
<li><a href="06_part_6.html#performing-spatial-queries-and-analysis"><span class="toc-section-number">8.4</span> Performing Spatial Queries and Analysis</a></li>
</ul></li>
</ul>
</div>
</nav>
</div>
</header>
</div>
</div>
<div class="row">
<div class="col-sm-12">
<div id="exercise-4-creating-lookup-tables-and-utilizing-lookup-values" class="section level1" number="6">
<h1><span class="header-section-number">6</span> Exercise 4: Creating Lookup Tables and Utilizing Lookup Values</h1>
<p>Now it’s time for you to think about data integrity! You have noticed that maintaining consistent and accurate data can sometimes be a challenge. Inconsistent values, misspellings, or different variations of the same category can lead to data quality issues and hinder effective analysis. This is where lookup tables come in, providing a solution to enhance data integrity and improve data entry workflows.</p>
<div id="identifying-attributes-requiring-predefined-values" class="section level2" number="6.1">
<h2><span class="header-section-number">6.1</span> Identifying Attributes Requiring Predefined Values</h2>
<p>By identifying specific attributes that benefit from predefined values, we can ensure consistency and enforce data integrity throughout our database.</p>
<p>Looking at the tables we have created, we can identify certain attributes that require predefined values.</p>
<table>
<thead>
<tr class="header">
<th><strong>Table</strong></th>
<th><strong>Attribute</strong></th>
<th><strong>Predefined Values</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Dwellings</td>
<td>Occupancy Status</td>
<td>Occupied, Vacant, Under Construction</td>
</tr>
<tr class="even">
<td>Water Distribution Points</td>
<td>Operational Status</td>
<td>Active, Temporarily Closed</td>
</tr>
<tr class="odd">
<td>Educational Facilities</td>
<td>Facility Type</td>
<td>School, Vocational Training Center</td>
</tr>
</tbody>
</table>
</div>
<div id="creating-an-enumeration-table" class="section level2" number="6.2">
<h2><span class="header-section-number">6.2</span> Creating an Enumeration Table</h2>
<div class="code-box">
<div class="sourceCode" id="cb5"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb5-1"><a href="04_part_4.html#cb5-1" aria-hidden="true"></a><span class="co">-- Lookup table for Dwellings&#39; Occupancy Status </span></span>
<span id="cb5-2"><a href="04_part_4.html#cb5-2" aria-hidden="true"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> dwellings_occupancy_status ( <span class="kw">id</span> <span class="dt">INTEGER</span> <span class="kw">GENERATED</span> ALWAYS <span class="kw">AS</span> IDENTITY <span class="kw">PRIMARY</span> <span class="kw">KEY</span>, status <span class="dt">VARCHAR</span>(<span class="dv">50</span>) <span class="kw">NOT</span> <span class="kw">NULL</span> );</span>
<span id="cb5-3"><a href="04_part_4.html#cb5-3" aria-hidden="true"></a></span>
<span id="cb5-4"><a href="04_part_4.html#cb5-4" aria-hidden="true"></a><span class="co">-- Lookup table for Water Distribution Points&#39; Operational Status </span></span>
<span id="cb5-5"><a href="04_part_4.html#cb5-5" aria-hidden="true"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> water_distribution_operational_status ( <span class="kw">id</span> <span class="dt">INTEGER</span> <span class="kw">GENERATED</span> ALWAYS <span class="kw">AS</span> IDENTITY <span class="kw">PRIMARY</span> <span class="kw">KEY</span>, status <span class="dt">VARCHAR</span>(<span class="dv">50</span>) <span class="kw">NOT</span> <span class="kw">NULL</span> );</span>
<span id="cb5-6"><a href="04_part_4.html#cb5-6" aria-hidden="true"></a></span>
<span id="cb5-7"><a href="04_part_4.html#cb5-7" aria-hidden="true"></a><span class="co">-- Lookup table for Educational Facilities&#39; Facility Type </span></span>
<span id="cb5-8"><a href="04_part_4.html#cb5-8" aria-hidden="true"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> educational_facilities_facility_type ( <span class="kw">id</span> <span class="dt">INTEGER</span> <span class="kw">GENERATED</span> ALWAYS <span class="kw">AS</span> IDENTITY <span class="kw">PRIMARY</span> <span class="kw">KEY</span>, <span class="kw">type</span> <span class="dt">VARCHAR</span>(<span class="dv">50</span>) <span class="kw">NOT</span> <span class="kw">NULL</span> ); </span></code></pre></div>
</div>
<p>Add foreign keys to the main tables. foreign keys establish a relationship between tables by</p>
</div>
<div id="establishing-relationships-with-the-main-data-table" class="section level2" number="6.3">
<h2><span class="header-section-number">6.3</span> Establishing Relationships with the Main Data Table</h2>
<p>Referencing the primary key of one table from another table, ensuring referential integrity and maintaining data consistency.</p>
<div class="code-box">
<div class="sourceCode" id="cb6"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb6-1"><a href="04_part_4.html#cb6-1" aria-hidden="true"></a><span class="co">-- Add foreign key to Dwellings table for Occupancy Status </span></span>
<span id="cb6-2"><a href="04_part_4.html#cb6-2" aria-hidden="true"></a><span class="kw">ALTER</span> <span class="kw">TABLE</span> dwellings <span class="kw">ADD</span> <span class="kw">COLUMN</span> occupancy_status_id <span class="dt">INTEGER</span> <span class="kw">REFERENCES</span> dwellings_occupancy_status(<span class="kw">id</span>); </span>
<span id="cb6-3"><a href="04_part_4.html#cb6-3" aria-hidden="true"></a></span>
<span id="cb6-4"><a href="04_part_4.html#cb6-4" aria-hidden="true"></a><span class="co">-- Add foreign key to Water Distribution Points table for Operational Status </span></span>
<span id="cb6-5"><a href="04_part_4.html#cb6-5" aria-hidden="true"></a><span class="kw">ALTER</span> <span class="kw">TABLE</span> water_distribution_points <span class="kw">ADD</span> <span class="kw">COLUMN</span> operational_status_id <span class="dt">INTEGER</span> <span class="kw">REFERENCES</span> water_distribution_operational_status(<span class="kw">id</span>); </span>
<span id="cb6-6"><a href="04_part_4.html#cb6-6" aria-hidden="true"></a></span>
<span id="cb6-7"><a href="04_part_4.html#cb6-7" aria-hidden="true"></a><span class="co">-- Add foreign key to Educational Facilities table for Facility Type </span></span>
<span id="cb6-8"><a href="04_part_4.html#cb6-8" aria-hidden="true"></a><span class="kw">ALTER</span> <span class="kw">TABLE</span> educational_facilities <span class="kw">ADD</span> <span class="kw">COLUMN</span> facility_type_id <span class="dt">INTEGER</span> <span class="kw">REFERENCES</span> educational_facilities_facility_type(<span class="kw">id</span>);</span></code></pre></div>
</div>
</div>
<div id="populating-the-enumeration-table" class="section level2" number="6.4">
<h2><span class="header-section-number">6.4</span> Populating the Enumeration Table</h2>
<p>Now we will populate the lookup tables with predefined values. You can also edit these afterwords in QGIS.</p>
<div class="code-box">
<div class="sourceCode" id="cb7"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb7-1"><a href="04_part_4.html#cb7-1" aria-hidden="true"></a><span class="co">-- Populate Dwellings&#39; Occupancy Status lookup table </span></span>
<span id="cb7-2"><a href="04_part_4.html#cb7-2" aria-hidden="true"></a><span class="kw">INSERT</span> <span class="kw">INTO</span> dwellings_occupancy_status (status) <span class="kw">VALUES</span> (<span class="st">&#39;Occupied&#39;</span>), (<span class="st">&#39;Vacant&#39;</span>), (<span class="st">&#39;Under Construction&#39;</span>);</span>
<span id="cb7-3"><a href="04_part_4.html#cb7-3" aria-hidden="true"></a></span>
<span id="cb7-4"><a href="04_part_4.html#cb7-4" aria-hidden="true"></a><span class="co">-- Populate Water Distribution Points&#39; Operational Status lookup table </span></span>
<span id="cb7-5"><a href="04_part_4.html#cb7-5" aria-hidden="true"></a><span class="kw">INSERT</span> <span class="kw">INTO</span> water_distribution_operational_status (status) <span class="kw">VALUES</span> (<span class="st">&#39;Active&#39;</span>), (<span class="st">&#39;Temporarily Closed&#39;</span>);</span>
<span id="cb7-6"><a href="04_part_4.html#cb7-6" aria-hidden="true"></a></span>
<span id="cb7-7"><a href="04_part_4.html#cb7-7" aria-hidden="true"></a><span class="co">-- Populate Educational Facilities&#39; Facility Type lookup table </span></span>
<span id="cb7-8"><a href="04_part_4.html#cb7-8" aria-hidden="true"></a><span class="kw">INSERT</span> <span class="kw">INTO</span> educational_facilities_facility_type (<span class="kw">type</span>) <span class="kw">VALUES</span> (<span class="st">&#39;School&#39;</span>), (<span class="st">&#39;Vocational Training Center&#39;</span>);</span></code></pre></div>
</div>
</div>
<div id="using-the-enumeration-table-in-qgis" class="section level2" number="6.5">
<h2><span class="header-section-number">6.5</span> Using the Enumeration Table in QGIS</h2>
<p>You can further customize and edit these tables in QGIS. To load them into QGIS, simply double-click the tables from the browser panel, and they will be added to your project. You can visualize and explore the data using the attribute table view in QGIS. In the next phase, we will establish connections between these tables and the main tables, laying the foundation for ensuring data integrity and maintaining consistency in our database.</p>
</div>
<div id="visualizing-the-relations-between-the-database-tables" class="section level2" number="6.6">
<h2><span class="header-section-number">6.6</span> Visualizing the relations between the database tables</h2>
<p>If you have installed a relational database management system such as pgAdmin or dBeaver you can visualize the relations.</p>
<p>For example, in pgAdmin there’s the “ERD for Database” functionality:</p>
<p><img src="img/p1/table_relations.png" /></p>
<p>Try this by yourself, if have pgAdmin installed:</p>
<ol style="list-style-type: decimal">
<li>Make the database connection</li>
<li>Double click the database connection</li>
<li>Choose the ERD for Database functionality</li>
<li>Understand graphically the relations</li>
</ol>

</div>
</div>
<p style="text-align: center;">
<a href="03_part_3.html"><button class="btn btn-default">Previous</button></a>
<a href="05_part_5.html"><button class="btn btn-default">Next</button></a>
</p>
</div>
</div>

<footer class="footer text-center">

<div class="footer-container text-center">

<div class="footer-info">
<h5 class="footer-title">Building an Enterprise GIS Workflow with QGIS and PostGIS</h5>
<span class="footer-version">v2023-06-22</span>
<div class="license"><img src="img/by-nd.svg" width="80px" alt="CC-BY-ND"></div>
</div>

<div class="footer-info">
<h5 class="footer-title footer-company">Gispo Ltd.
<span class="footer-copyright-year">© 2023</span></h5>
<span class="footer-contact-info">Kumpulantie 3, 3. krs
<br>00520 Helsinki, Finland
<br>info@gispo.fi
</span>
</div>

</div>
</div>
</footer>
</div>


<script src="js/nav-script.js"></script>

</body>
</html>
